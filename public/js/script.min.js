let popup=document.querySelector(".popup-overlay");if(popup&&(document.addEventListener("click",e=>{e.target.classList.contains("header__btn-registration")||e.target.classList.contains("broadcast__registration-btn")?(popup.classList.add("active"),window.scrollTo({top:0,behavior:"smooth"})):(e.target.classList.contains("popup__btn-close")||e.target.closest(".popup__btn-close")||e.target==popup)&&popup.classList.remove("active")}),"#popup"===window.location.hash)){let e=document.querySelector(".header__btn-registration"),t=document.querySelector(".broadcast__registration-btn");e&&e.click(),t&&t.click()}let formInputs=document.querySelectorAll(".reg-form__inputs input");formInputs&&formInputs.forEach(e=>{e.addEventListener("change",()=>{e.value.length?e.closest(".reg-form__input-wrapper").classList.add("active"):e.closest(".reg-form__input-wrapper").classList.remove("active")})});let formSelect=document.querySelector(".reg-form__inputs select");formSelect&&formSelect.addEventListener("click",()=>{formSelect.classList.add("active"),formSelect.closest(".reg-form__input-wrapper").classList.add("active")});let qr=document.querySelector(".qr-overlay");qr&&document.addEventListener("click",e=>{e.target.classList.contains("thanks__mask--desktop")||e.target.closest(".thanks__mask--desktop")?qr.classList.add("active"):(e.target.classList.contains("qr-close")||e.target.closest(".qr-close")||e.target==qr)&&qr.classList.remove("active")});let formInputsRequired=document.querySelectorAll(".reg-form__inputs .required");function animate({duration:e,draw:t,timing:r}){let i=performance.now();requestAnimationFrame((function n(o){let a=(o-i)/e;a>1&&(a=1);let s=r(a);t(s),a<1&&requestAnimationFrame(n)}))}formInputs&&document.addEventListener("click",e=>{e.target.classList.contains("reg-form__submit")&&formInputsRequired.forEach(e=>{e.value.length?e.closest("div").classList.remove("invalid"):e.closest("div").classList.add("invalid")})});let mainBannerCoinContainer=document.querySelector(".header__animation-coin");if(mainBannerCoinContainer)for(let e=0;e<60;e++){let t=document.createElement("img");t.src=`video/coin/bluecoin_000${e}-min.png`,t.style.display="none",mainBannerCoinContainer.appendChild(t)}window.addEventListener("load",()=>{if(document.body.classList.add("active"),mainBannerCoinContainer){let e=document.querySelector(".header__animation-video"),t=document.querySelectorAll(".header__animation-coin img"),r=60,i=function(){animate({duration:1e3,timing:function(e){return e},draw:function(e){let i=Math.round(r*e-1>0?r*e-1:0);t.forEach((e,t)=>{e.style.display=t==i?"block":"none"})}})},n=function(){animate({duration:1e3,timing:function(e){return e},draw:function(e){let i=Math.round(r-r*e-1>0?r-r*e-1:0);t.forEach((e,t)=>{e.style.display=t==i?"block":"none"})}})};e.play(),i(),setTimeout(()=>{n()},6e3),e.addEventListener("ended",()=>{e.play(),i(),setTimeout(()=>{n()},6e3)}),e.addEventListener("play",()=>{let e=document.querySelectorAll(".people__card-photo video");e&&e.forEach(e=>{})})}});let videoWidthlazyLoad=document.querySelector("video.lazy-video");videoWidthlazyLoad&&document.addEventListener("DOMContentLoaded",(function(){var e=[].slice.call(document.querySelectorAll("video.lazy-video"));if("IntersectionObserver"in window){var t=new IntersectionObserver((function(e,r){e.forEach((function(e){if(e.isIntersecting){for(var r in e.target.src=e.target.dataset.src,e.target.children){var i=e.target.children[r];"string"==typeof i.tagName&&"SOURCE"===i.tagName&&(i.src=i.dataset.src)}e.target.load(),e.target.play(),e.target.classList.remove("lazy-video"),t.unobserve(e.target)}}))}));e.forEach((function(e){t.observe(e)}))}}));let swiperContainer=document.querySelector(".swiper-container");if(swiperContainer){new Swiper(".swiper-container",{loop:!0,slidesPerView:"auto",speed:2500,autoplay:{delay:0}})}var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version",this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(e){for(var t=0;t<e.length;t++){var r=e[t].string,i=e[t].prop;if(this.versionSearchString=e[t].versionSearch||e[t].identity,r){if(-1!=r.indexOf(e[t].subString))return e[t].identity}else if(i)return e[t].identity}},searchVersion:function(e){var t=e.indexOf(this.versionSearchString);if(-1!=t)return parseFloat(e.substring(t+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Internet Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};BrowserDetect.init(),"Mac"!==BrowserDetect.OS&&"Safari"!==BrowserDetect.browser||document.body.classList.add("is-safari");let regFormName=document.querySelector("#reg-form__name"),regFormSubmit=document.querySelector(".reg-form__submit"),thanksUserName=document.querySelector(".thanks__user-name");regFormSubmit&&regFormSubmit.addEventListener("click",()=>{localStorage.setItem("fdcUsername",regFormName.value)}),thanksUserName&&document.addEventListener("DOMContentLoaded",()=>{thanksUserName.textContent=""+(localStorage.getItem("fdcUsername")?localStorage.getItem("fdcUsername"):"Аноним")});let distanceToTop,timelineCard=document.querySelectorAll(".timeline__card"),timelinePopup=document.querySelectorAll(".timeline__popup"),html=document.querySelector("html"),scrollWrapper=document.querySelector(".scroll-wrapper");timelinePopup&&(timelineCard.forEach((e,t)=>{e.addEventListener("click",()=>{if(!e.classList.contains("timeline__card_current")&&!e.classList.contains("timeline__card_final")){html.classList.add("hidden"),distanceToTop=window.pageYOffset,finalForm&&(timelinePopup[t-1].style.transform=`translateY(${distanceToTop}px)`),timelinePopup[t-1].classList.add("timeline__popup_active"),timelinePopup[t-1].querySelector(".timeline__popup-close").addEventListener("click",()=>{finalForm&&window.scrollTo({top:distanceToTop}),timelinePopup[t-1].classList.remove("timeline__popup_active"),html.classList.remove("hidden")})}})}),timelinePopup.forEach(e=>{e.addEventListener("click",()=>{finalForm&&window.scrollTo({top:distanceToTop}),e.classList.remove("timeline__popup_active"),html.classList.remove("hidden")})}));let page=document.querySelector(".page"),scrollContent=document.querySelector(".scroll-content"),peopleTopLine=document.querySelector(".people__top-line"),peopleCardsWrapper=document.querySelector(".people__cards-wrapper"),peopleCards=document.querySelector(".people__cards");if(page){let e=scrollWrapper.clientHeight+peopleCards.clientHeight-peopleCardsWrapper.clientHeight;document.body.style.height=e+"px",document.addEventListener("scroll",()=>{html.classList.contains("hidden")||(window.pageYOffset<peopleCards.offsetTop-peopleTopLine.clientHeight?scrollWrapper.style.transform=`translateY(-${window.pageYOffset}px)`:window.pageYOffset>peopleCards.offsetTop+peopleCards.clientHeight-peopleCardsWrapper.clientHeight-peopleTopLine.clientHeight&&(scrollWrapper.style.transform=`translateY(-${window.pageYOffset-peopleCards.clientHeight+peopleCardsWrapper.clientHeight}px)`),window.pageYOffset>peopleCards.offsetTop-peopleTopLine.clientHeight&&window.pageYOffset<peopleCards.offsetTop+peopleCards.clientHeight-peopleCardsWrapper.clientHeight&&(peopleCards.style.transform=`translateY(-${window.pageYOffset-peopleCards.offsetTop}px)`))})}let headerBtnRegistration=document.querySelector(".header__btn-registration"),finalForm=document.querySelector(".final__form");headerBtnRegistration&&headerBtnRegistration.addEventListener("click",e=>{e.preventDefault(),window.scrollTo({top:finalForm.offsetTop+peopleCards.clientHeight-peopleCardsWrapper.clientHeight-25,behavior:"smooth"}),scrollWrapper.style.transform=`translateY(-${finalForm.offsetTop-25}px)`});let broadcastTranslationSpeaker=document.querySelector(".broadcast__translation-speaker"),broadcastTranslationDescription=document.querySelector(".broadcast__translation-description"),broadcastTimeline=document.querySelector(".broadcast__timeline"),broadcastTimelineShowOld=document.querySelector(".broadcast__timeline-show-old");if(broadcastTimeline){let e=()=>{let e,t=new Date,r=Number(t.getHours()),i=Number(t.getMinutes());if(timelineCard.forEach((e,t)=>{let n=e.querySelector(".timeline__card-time").textContent,o=Number(n.slice(0,2)),a=Number(n.slice(3,5));(o<r&&timelineCard[t-1]||o===r&&(a<i||a===i)&&timelineCard[t-1])&&timelineCard[t-1].classList.add("timeline__card_old")}),document.querySelectorAll(".timeline__card_old").length){timelineCard.forEach((t,r)=>{t.classList.contains("timeline__card_old")||e||(e=r)});let t=timelineCard[e].querySelector(".timeline__card-name");broadcastTranslationSpeaker.textContent=t.textContent;let r=Number(window.getComputedStyle(timelineCard[0]).getPropertyValue("margin-bottom").replace(/\D+/g,"")),i=e>0?timelineCard[0].clientHeight*e+r*e:0;broadcastTimeline.scrollTo({top:i,behavior:"smooth"})}};e(),setInterval(e,1e4);let t=timelineCard[timelineCard.length-1].scrollHeight;broadcastTimelineShowOld.addEventListener("click",()=>{let e=document.querySelectorAll(".timeline__card_old");broadcastTimelineShowOld.classList.toggle("broadcast__timeline-show-old_active"),e.forEach(e=>{e.classList.toggle("timeline__card_old_active"),e.style.maxHeight?e.style.maxHeight=null:e.style.maxHeight=t+"px"})})}